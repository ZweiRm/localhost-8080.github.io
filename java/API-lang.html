<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>API-语言基础类库 (Package java.lang) | 本地煮鸡:8080</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/img/favicon.ico">
    <meta name="description" content="一个博客, 大概会记录一些技术笔记">
    <meta property="article:modified_time" content="2021-08-29T13:44:40.000Z">
    <meta property="og:site_name" content="本地煮鸡:8080">
    <meta property="og:title" content="API-语言基础类库 (Package java.lang)">
    <meta property="og:type" content="article">
    <meta property="og:url" content="/java/API-lang.html">
    <meta name="twitter:title" content="API-语言基础类库 (Package java.lang)">
    <meta name="twitter:url" content="/java/API-lang.html">
    
    <link rel="preload" href="/assets/css/0.styles.6382141a.css" as="style"><link rel="preload" href="/assets/js/app.a2454d80.js" as="script"><link rel="preload" href="/assets/js/3.3e1ac6b4.js" as="script"><link rel="preload" href="/assets/js/32.8ea40cfb.js" as="script"><link rel="preload" href="/assets/js/6.5d34e6c7.js" as="script"><link rel="preload" href="/assets/js/5.98c08254.js" as="script"><link rel="prefetch" href="/assets/js/10.d8e60297.js"><link rel="prefetch" href="/assets/js/11.e4597082.js"><link rel="prefetch" href="/assets/js/12.565d30e8.js"><link rel="prefetch" href="/assets/js/13.5c03949d.js"><link rel="prefetch" href="/assets/js/14.f49a1040.js"><link rel="prefetch" href="/assets/js/15.1ef10c8b.js"><link rel="prefetch" href="/assets/js/16.65acd3b7.js"><link rel="prefetch" href="/assets/js/17.a7c5beed.js"><link rel="prefetch" href="/assets/js/18.642f4c10.js"><link rel="prefetch" href="/assets/js/19.f4610694.js"><link rel="prefetch" href="/assets/js/20.e140871b.js"><link rel="prefetch" href="/assets/js/21.227845b5.js"><link rel="prefetch" href="/assets/js/22.597cde87.js"><link rel="prefetch" href="/assets/js/23.9e81813d.js"><link rel="prefetch" href="/assets/js/24.d8a25e39.js"><link rel="prefetch" href="/assets/js/25.09c31aff.js"><link rel="prefetch" href="/assets/js/26.fa1b5b51.js"><link rel="prefetch" href="/assets/js/27.5130ae25.js"><link rel="prefetch" href="/assets/js/28.1614b116.js"><link rel="prefetch" href="/assets/js/29.58baf3ae.js"><link rel="prefetch" href="/assets/js/30.d20428cb.js"><link rel="prefetch" href="/assets/js/31.376b0993.js"><link rel="prefetch" href="/assets/js/33.33680ecb.js"><link rel="prefetch" href="/assets/js/34.bf8aca24.js"><link rel="prefetch" href="/assets/js/35.a0081568.js"><link rel="prefetch" href="/assets/js/36.b4b82385.js"><link rel="prefetch" href="/assets/js/37.288ea8cc.js"><link rel="prefetch" href="/assets/js/38.ce2ca628.js"><link rel="prefetch" href="/assets/js/39.7e73dab7.js"><link rel="prefetch" href="/assets/js/4.f7f5e982.js"><link rel="prefetch" href="/assets/js/40.7bd48cd9.js"><link rel="prefetch" href="/assets/js/41.077e5c17.js"><link rel="prefetch" href="/assets/js/42.07315e9d.js"><link rel="prefetch" href="/assets/js/43.df5a7553.js"><link rel="prefetch" href="/assets/js/44.2b7ff68c.js"><link rel="prefetch" href="/assets/js/45.c8e499f7.js"><link rel="prefetch" href="/assets/js/46.2b2073f9.js"><link rel="prefetch" href="/assets/js/47.81dfd3c4.js"><link rel="prefetch" href="/assets/js/48.3cc7b7c6.js"><link rel="prefetch" href="/assets/js/49.5d36a1b9.js"><link rel="prefetch" href="/assets/js/50.3a03909f.js"><link rel="prefetch" href="/assets/js/51.ec37da90.js"><link rel="prefetch" href="/assets/js/52.4ae2259f.js"><link rel="prefetch" href="/assets/js/53.f53cfbdd.js"><link rel="prefetch" href="/assets/js/54.62aeef80.js"><link rel="prefetch" href="/assets/js/55.069b050b.js"><link rel="prefetch" href="/assets/js/56.82b45417.js"><link rel="prefetch" href="/assets/js/57.2f622372.js"><link rel="prefetch" href="/assets/js/58.bf4cd89a.js"><link rel="prefetch" href="/assets/js/59.8c3edcb8.js"><link rel="prefetch" href="/assets/js/60.6442b3bc.js"><link rel="prefetch" href="/assets/js/61.217f65a1.js"><link rel="prefetch" href="/assets/js/62.21fa98a7.js"><link rel="prefetch" href="/assets/js/63.099fe6a9.js"><link rel="prefetch" href="/assets/js/7.7dd11319.js"><link rel="prefetch" href="/assets/js/8.c65feb50.js"><link rel="prefetch" href="/assets/js/9.790cfb3b.js"><link rel="prefetch" href="/assets/js/vendors~flowchart.d3fd88fa.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6382141a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">本地煮鸡:8080</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/hello-world/" class="nav-link">
  杂谈
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="施工中笔记" class="dropdown-title"><span class="title">施工中笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="施工中笔记" class="mobile-dropdown-title"><span class="title">施工中笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          编程语言
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/kotlin/" class="nav-link">
  Kotlin
</a></li><li class="dropdown-subitem"><a href="/python/" class="nav-link">
  Python
</a></li></ul></li><li class="dropdown-item"><h4>
          后端开发技术
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/" class="nav-link">
  Web
</a></li><li class="dropdown-subitem"><a href="/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-subitem"><a href="/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/big-data/" class="nav-link">
  大数据
</a></li></ul></li><li class="dropdown-item"><h4>
          学科基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/software-engineering/" class="nav-link">
  软件工程
</a></li><li class="dropdown-subitem"><a href="/algorithm/" class="nav-link">
  算法
</a></li></ul></li><li class="dropdown-item"><h4>
          机器学习
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/artificial-intelligence/" class="nav-link">
  人工智能
</a></li><li class="dropdown-subitem"><a href="/deep-learning/" class="nav-link">
  深度学习
</a></li><li class="dropdown-subitem"><a href="/recommender-systems/" class="nav-link">
  推荐系统
</a></li><li class="dropdown-subitem"><a href="/quantitative-methods-for-DA-AI/" class="nav-link">
  数据分析与人工智能定量分析
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://www.github.com/ZweiRm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/zweirm/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ZweiRm/localhost-8080.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="笔记" class="dropdown-title"><span class="title">笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="笔记" class="mobile-dropdown-title"><span class="title">笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/java/" class="nav-link router-link-active">
  Java
</a></li><li class="dropdown-item"><!----> <a href="/hello-world/" class="nav-link">
  杂谈
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="施工中笔记" class="dropdown-title"><span class="title">施工中笔记</span> <span class="arrow down"></span></button> <button type="button" aria-label="施工中笔记" class="mobile-dropdown-title"><span class="title">施工中笔记</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          编程语言
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/kotlin/" class="nav-link">
  Kotlin
</a></li><li class="dropdown-subitem"><a href="/python/" class="nav-link">
  Python
</a></li></ul></li><li class="dropdown-item"><h4>
          后端开发技术
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/web/" class="nav-link">
  Web
</a></li><li class="dropdown-subitem"><a href="/spring/" class="nav-link">
  Spring
</a></li><li class="dropdown-subitem"><a href="/mysql/" class="nav-link">
  MySQL
</a></li><li class="dropdown-subitem"><a href="/redis/" class="nav-link">
  Redis
</a></li><li class="dropdown-subitem"><a href="/big-data/" class="nav-link">
  大数据
</a></li></ul></li><li class="dropdown-item"><h4>
          学科基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/software-engineering/" class="nav-link">
  软件工程
</a></li><li class="dropdown-subitem"><a href="/algorithm/" class="nav-link">
  算法
</a></li></ul></li><li class="dropdown-item"><h4>
          机器学习
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/artificial-intelligence/" class="nav-link">
  人工智能
</a></li><li class="dropdown-subitem"><a href="/deep-learning/" class="nav-link">
  深度学习
</a></li><li class="dropdown-subitem"><a href="/recommender-systems/" class="nav-link">
  推荐系统
</a></li><li class="dropdown-subitem"><a href="/quantitative-methods-for-DA-AI/" class="nav-link">
  数据分析与人工智能定量分析
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/about/" class="nav-link">
  关于
</a></div><div class="nav-item"><a href="https://www.github.com/ZweiRm" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://gitee.com/zweirm/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  码云
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ZweiRm/localhost-8080.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    查看源码
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/java/" aria-current="page" class="sidebar-link">Java 概述</a></li><li><a href="/java/grammars.html" class="sidebar-link">语法</a></li><li><a href="/java/object-oriented.html" class="sidebar-link">面向对象</a></li><li><a href="/java/API-introduction.html" class="sidebar-link">应用程序编程接口</a></li><li><a href="/java/API-lang.html" aria-current="page" class="active sidebar-link">API-语言基础类库 (Package java.lang)</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/API-lang.html#object类" class="sidebar-link">Object类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/API-lang.html#基本信息" class="sidebar-link">基本信息</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#重要方法" class="sidebar-link">重要方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#system类" class="sidebar-link">System类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/API-lang.html#基本信息-2" class="sidebar-link">基本信息</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#重要方法-2" class="sidebar-link">重要方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#异常" class="sidebar-link">异常</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/API-lang.html#基本信息-3" class="sidebar-link">基本信息</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#exception" class="sidebar-link">Exception</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#error" class="sidebar-link">Error</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#线程" class="sidebar-link">线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/API-lang.html#基本信息-4" class="sidebar-link">基本信息</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#进程与线程" class="sidebar-link">进程与线程</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#自定义线程" class="sidebar-link">自定义线程</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#线程同步" class="sidebar-link">线程同步</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#线程通信" class="sidebar-link">线程通信</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#死锁" class="sidebar-link">死锁</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#线程状态" class="sidebar-link">线程状态</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#守护线程" class="sidebar-link">守护线程</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#线程优先级" class="sidebar-link">线程优先级</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#枚举" class="sidebar-link">枚举</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/API-lang.html#基本信息-5" class="sidebar-link">基本信息</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#string类" class="sidebar-link">String类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/API-lang.html#基本信息-6" class="sidebar-link">基本信息</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#重要方法-3" class="sidebar-link">重要方法</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#正则表达式" class="sidebar-link">正则表达式</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#包装类" class="sidebar-link">包装类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/API-lang.html#基本信息-7" class="sidebar-link">基本信息</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#装箱" class="sidebar-link">装箱</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#自动装箱" class="sidebar-link">自动装箱</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#自动拆箱" class="sidebar-link">自动拆箱</a></li></ul></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#math类" class="sidebar-link">Math类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/java/API-lang.html#基本信息-8" class="sidebar-link">基本信息</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#重要方法-4" class="sidebar-link">重要方法</a></li><li class="sidebar-sub-header"><a href="/java/API-lang.html#strictfp关键字" class="sidebar-link">strictfp关键字</a></li></ul></li></ul></li><li><a href="/java/API-util.html" class="sidebar-link">API-工具类库 (Package java.util)</a></li><li><a href="/java/API-io.html" class="sidebar-link">API-输入/输出类库 (Package java.io)</a></li><li><a href="/java/references.html" class="sidebar-link">参考文献或资料</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="api-语言基础类库-package-java-lang"><a href="#api-语言基础类库-package-java-lang" class="header-anchor">#</a> API-语言基础类库 (Package <code>java.lang</code>)</h1> <h2 id="object类"><a href="#object类" class="header-anchor">#</a> <code>Object</code>类</h2> <h3 id="基本信息"><a href="#基本信息" class="header-anchor">#</a> 基本信息</h3> <p><strong>Package</strong> java.lang<br> <code>public class Object</code></p> <ul><li><p><code>Object</code>类是所有类的父类。在 Java 中处于顶级父类的地位，是类层级结构的根类。</p></li> <li><p>任何类对象都可以用<code>Object</code>类的对象来接收。</p></li></ul> <h3 id="重要方法"><a href="#重要方法" class="header-anchor">#</a> 重要方法</h3> <ol><li><p><code>clone()</code></p> <ul><li><p>克隆一个对象。</p></li> <li><p>当一个对象要被克隆时，<strong>它所对应的类必须实现<code>Cloneable</code>接口</strong>。</p></li> <li><p>克隆完成后会产生一个新的对象。<strong>新对象和原对象的地址不同，但属性值相同</strong>。</p></li> <li><p><code>Cloneable</code>接口<br>
其中没有任何属性和方法，仅用于标识此类产生的对象可以被克隆。</p></li></ul></li> <li><p><code>finalize()</code></p> <ul><li><p>通知<code>GC</code>回收当前对象。</p></li> <li><p>即使<code>GC</code>已经开始运行，也只回收当前对象而不回收其他对象。</p></li> <li><p><span style="color:#3eaf7c;">* <code>System.gc()</code>通知<code>GC</code>回收所有可以回收的对象。→<a href="#_4-2-2-system%E7%B1%BB"><code>System</code>类</a></span></p></li></ul></li> <li><p><code>getClass()</code><br>
获取对象的运行时类对象（如，后续可用于反射）。</p></li> <li><p><code>hashCode()</code><br>
获取该对象的哈希码值，在一定范围内可以认为是唯一的。哈希码为一串 32 位的二进制数据。</p></li> <li><p><code>toString()</code><br>
打印对象。实际调用对象本身的<code>toString()</code>。</p></li> <li><p><code>equals(Object obj)</code><br>
比较两个对象是否相等。默认比较对象的地址，但对于<code>File</code>，<code>String</code>，<code>Date</code>和包装类来说，它们比较地是对象值。</p> <div class="custom-block tip"><p class="custom-block-title">特别地</p> <p>当手动重写<code>equals()</code>时，思路为:</p> <ol><li><p>判断地址是否一致(<code>if (this == obj)</code>)</p></li> <li><p>判断参数是否为空(<code>if (obj == null)</code>)</p></li> <li><p>判断类型是否一致(<code>if (this.getClass() != obj.getClass())</code>)</p></li> <li><p>判断属性值是否一致</p></li></ol></div></li></ol> <h2 id="system类"><a href="#system类" class="header-anchor">#</a> <code>System</code>类</h2> <h3 id="基本信息-2"><a href="#基本信息-2" class="header-anchor">#</a> 基本信息</h3> <p><strong>Package</strong> java.lang</p> <p><code>public final class System</code></p> <ul><li><p><code>System</code>类提供了标准输入输出、错误输入输出和一些访问系统属性的方法。</p></li> <li><p>它是一个静态类，不能被继承，不能被实例化，所有方法都是静态方法。</p></li></ul> <h3 id="重要方法-2"><a href="#重要方法-2" class="header-anchor">#</a> 重要方法</h3> <ol><li><p><code>static void gc()</code></p> <p>强制 Java 虚拟机启动垃圾回收机制，收集内存中所有不再被引用的对象所占用的内存空间。</p></li> <li><p><code>static void exit(int status)</code></p> <p>强制终止当前正在运行的 Java 虚拟机，并将参数<code>status</code>返回给系统。通常来讲，<code>status</code>为 0 表示正常终止；非 0 表示异常终止。</p></li> <li><p><code>static long currentTimeMillis()</code><br>
返回从 1970 年 1 月 1 日到当前系统时间的毫秒数。</p></li></ol> <div class="custom-block tip"><p class="custom-block-title">关于<code>System</code>类的属性</p> <ul><li><p><code>in</code><br>
从键盘输入信息，只能按字节读取</p></li> <li><p><code>out</code><br>
将信息标准输出到显示器（是<code>PrintStream</code>类的对象，声明：<code>static final PrintStream out</code>）</p></li> <li><p><code>err</code><br>
将错误提示信息（使用红色字体）输出到显示器（是<code>PrintStream</code>类的对象，声明：<code>static final PrintStream err</code>）</p></li></ul> <p>*这三个属性都是字节流，见 <a href="/java/API-输入输出类库.html/#i-o-stream">I/O Stream</a>.</p></div> <h2 id="异常"><a href="#异常" class="header-anchor">#</a> 异常</h2> <p>异常是一套处理和反馈问题的机制。</p> <h3 id="基本信息-3"><a href="#基本信息-3" class="header-anchor">#</a> 基本信息</h3> <p><strong>Package</strong> java.lang</p> <p><code>public class Throwable</code></p> <ul><li><p><code>Throwable</code>类是异常 (Exception) 和错误 (Error) 的父类。</p></li> <li><p>错误无法处理，而异常可以处理。</p></li></ul> <h3 id="exception"><a href="#exception" class="header-anchor">#</a> <code>Exception</code></h3> <p><strong>分类</strong></p> <ul><li><p>编译时异常（或称已检查异常）：编译期出现的异常，要求必须处理，抛出或者捕获。<br>
如：<code>CloneNotSupportedException</code>和<code>ParseException</code></p></li> <li><p>运行时异常（或称未检查异常）：编译期不报错，但运行时出现。在编译期处理与否均可，往往非语法错误。<br>
如：<code>ArithmeticException</code>、<code>ArrayIndexOutOfBoundException</code>、<code>NullPointerException</code>、<code>ClassCastException</code>和<code>NumberFormatException</code></p></li> <li><p>自定义异常：编程者通过继承某个异常类自己编写的异常。</p></li></ul> <div class="custom-block tip"><p class="custom-block-title">关于异常处理</p> <ul><li><p>运行时异常可以随意抛出和捕获</p></li> <li><p>编译时异常只能在抛出时捕获</p></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">关于异常捕获</p> <ul><li><p>使用多个<code>catch</code>来分别捕获不同的异常</p></li> <li><p>可以捕获一个父类异常，统一处理</p></li> <li><p>在一个<code>catch</code>语句中，可以使用<code>|</code>分割不同的异常来分组处理，避免了写多个<code>catch</code>语句<span class="badge tip" style="vertical-align:top;" data-v-15b7b770>&gt; Java SE 7.0</span></p></li> <li><p>当一个方法声明抛出父类异常时，处理中必须处理父类异常</p></li> <li><p>在捕获异常时，需要先捕获子类异常再捕获父类异常</p></li></ul></div> <div class="custom-block tip"><p class="custom-block-title">关于 finally</p> <p>无论是否发生异常都会执行</p></div> <h3 id="error"><a href="#error" class="header-anchor">#</a> <code>Error</code></h3> <p>错误。不应试图捕获的严重问题。无法处理。</p> <h2 id="线程"><a href="#线程" class="header-anchor">#</a> 线程</h2> <h3 id="基本信息-4"><a href="#基本信息-4" class="header-anchor">#</a> 基本信息</h3> <p><strong>Package</strong> java.lang<br> <code>public class Thread</code></p> <h3 id="进程与线程"><a href="#进程与线程" class="header-anchor">#</a> 进程与线程</h3> <ul><li><p>线程是操作系统中的重要概念之一，是程序运行的基本单元。</p></li> <li><p>进程是线程的集合。每一个进程可以创建一个或多个线程。</p></li></ul> <h3 id="自定义线程"><a href="#自定义线程" class="header-anchor">#</a> 自定义线程</h3> <p>线程执行没有顺序性，相互抢占资源。这个抢占过程不只存在于线程执行的开始，而是存在于执行的全过程。在这种抢占模式下，会导致不合常理的情况发生（多线程并发安全问题）。</p> <ul><li><p>继承<code>Thread</code>类</p> <ul><li><p>在<code>run()</code>中重写线程执行逻辑。<br>
子类重写父类方法后，覆盖父类中的 <code>run()</code>，执行时直接执行这个方法。</p></li> <li><p>类实例通过<code>start()</code>启动线程。</p></li></ul></li> <li><p>实现<code>Runnable</code>接口</p> <ul><li><p>重写<code>run()</code>。<br>
在 <code>Thread</code> 类中 <code>run()</code> 源码为：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>target <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        target<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>手动定义的 <code>run()</code> 作为 target 对象传给 <code>Thread</code> 类，在判断非空后调用 <code>target.run()</code> (即我们手动写的 <code>run()</code>)。</p></li> <li><p>通过<code>Thread</code>类对象启动线程。</p></li></ul></li></ul> <div class="custom-block tip"><p class="custom-block-title">一般地</p> <p>我们认为实现 <code>Runnable</code> 接口的方式更好。<br>
使用继承 <code>Thread</code> 类方法建立线程的缺点：</p> <ul><li>继承 <code>Thread</code> 类后，线程的运行和逻辑耦合在一起</li> <li>每个线程独立，无法应用线程池来减少线程创建和销毁的资源占用</li> <li>Java 只允许单继承，当已经继承了 <code>Thread</code> 类后，可扩展性降低</li></ul> <p>Q: 分析以下代码运行情况</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====Runnable====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====Thread====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>[分析]<br>
在以 <code>Thread</code> 为基础的匿名内部类的参数中，传入了一个 <code>Runnable</code> 接口的实现。该实现重写了 <code>run()</code> 作为源码中的 <code>target.run()</code> 传递给外部的匿名内部类。在匿名内部类里重写了 <code>run()</code> 完全覆盖了 <code>Thread</code> 类中的 <code>run()</code>。所以最终只执行匿名内部类中的 <code>run()</code>。</p> <p>运行结果：</p> <div class="language- extra-class"><pre class="language-text"><code>====Thread====
</code></pre></div></div> <div class="custom-block warning"><p class="custom-block-title">也就是说</p> <p>不管通过哪种方法实现线程，创建的时候都是在构造一个 <code>Thread</code> 类。通过 <code>Runnable</code> 接口实现 <code>run()</code> 后，会把这个接口的实例传给 Thread类；通过继承 <code>Thread</code> 类后，重写 <code>run()</code> 直接调用该方法。</p></div> <div class="custom-block danger"><p class="custom-block-title">一些不全面的观点</p> <ol><li><p>使用线程池也是一种创建线程的方法<br>
使用线程池创建 500 个线程并打印它们的名称：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main40</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 创建线程池</span>
        <span class="token class-name">ExecutorService</span> executorService <span class="token operator">=</span> <span class="token class-name">Executors</span><span class="token punctuation">.</span><span class="token function">newCachedThreadPool</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">500</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            executorService<span class="token punctuation">.</span><span class="token function">submit</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Task</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Runnable Task</span>
<span class="token keyword">class</span> <span class="token class-name">Task</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>   
</code></pre></div><p>进入 <code>Executors</code> 类源码我们可以观察到，它最终也是使用 <code>Thread</code> 来创建线程的：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token keyword">public</span> <span class="token class-name">Thread</span> <span class="token function">newThread</span><span class="token punctuation">(</span><span class="token class-name">Runnable</span> r<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span> t <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>group<span class="token punctuation">,</span> r<span class="token punctuation">,</span>
                namePrefix <span class="token operator">+</span> threadNumber<span class="token punctuation">.</span><span class="token function">getAndIncrement</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div></li> <li><p>通过实现 <code>Callable&lt;T&gt;</code> 接口或 <code>FutureTask</code> 类也算一种线程得到创建方法<br>
它们底层也是通过 <code>Runnable</code> 接口来实现的。所以根据 <code>Callable</code> 有返回值而 <code>Runnable</code> 没有来说明 <code>Callable</code> 是一种新的线程实现方法的说法也无道理。</p></li> <li><p>使用定时器创建线程也是一种新的创建线程的方法<br>
使用 <code>Timer</code> 来每秒打印一下线程的名称：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Timer</span> timer <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Timer</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        timer<span class="token punctuation">.</span><span class="token function">scheduleAtFixedRate</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TimerTask</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们可以观察到 <code>TimerTask</code> 类的源码中，实现了 <code>Runnable</code> 接口：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">TimerTask</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre></div></li> <li><p>通过匿名内部类或者使用 Lambda 表达式语法创建线程是一种新的方法</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 匿名内部类方法一</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 匿名内部类方法二</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Runnable</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// Lambda 表达式</span>
        <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-&gt;</span> <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>它们的本质也是实现了 <code>Runnable</code> 接口，重写了 <code>run()</code>.</p></li></ol></div> <h3 id="线程同步"><a href="#线程同步" class="header-anchor">#</a> 线程同步</h3> <h4 id="分类"><a href="#分类" class="header-anchor">#</a> 分类</h4> <p>使用 <code>synchronized</code> 关键字来同步多个线程，一定程度上解决线程冲突。它可以保证在同一时刻最多只有一个线程执行该段被修饰的代码。是最基本的互斥同步手段。</p> <ul><li><p>对象锁</p> <ol><li><p><strong>同步代码块</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>   <span class="token keyword">synchronized</span><span class="token punctuation">(</span>同步锁 <span class="token operator">*</span>所有线程可见<span class="token operator">*</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      …
   <span class="token punctuation">}</span>      
</code></pre></div><p>手动指定锁对象，可以传入类字节码（类锁），<code>this</code>对象（对象锁），共享资源。</p> <p>实例（使用 <code>this</code> 作为锁对象）：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
   <span class="token comment">// 生成实例</span>
   <span class="token keyword">static</span> <span class="token class-name">Main</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====开始同步代码块====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">try</span> <span class="token punctuation">{</span>
               <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步代码块结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
      <span class="token comment">// 创建线程对象</span>
      <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 运行线程</span>
      thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 保证正确提示</span>
      thread1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      thread2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">//        while (thread1.isAlive() || thread2.isAlive()) {}</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====结束=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><code>synchronized</code> 关键字锁定了以 <code>this</code> 为对象的代码块。在两个线程使用 <code>start()</code> 调用到 <code>run()</code> 时，会因为锁的缘故按次序运行，释放掉第一个线程的锁再执行第二个。若没有对代码块进行锁定，则两个线程同时执行代码块中的内容。</p> <p>实例（使用对象作为锁对象）：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
   <span class="token comment">// 生成实例</span>
   <span class="token keyword">static</span> <span class="token class-name">Main</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token comment">// 生成锁对象</span>
   <span class="token class-name">Object</span> lock1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token class-name">Object</span> lock2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 代码块 1</span>
      <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock1<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====开始同步代码块 1====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步代码块 1 结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
               <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>

      <span class="token comment">// 代码块 2</span>
      <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====开始同步代码块 2====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步代码块 2 结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
               <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
               e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
      <span class="token comment">// 创建线程对象</span>
      <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 运行线程</span>
      thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// 保证正确提示</span>
      thread1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      thread2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        while (thread1.isAlive() || thread2.isAlive()) {}</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;=====结束=====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果：<br> <img src="/img/synchronized_block.gif" alt="同步代码块"><br>
可以发现，执行步骤为：</p> <ol><li>Thread-0 拿到 lock 1； 执行代码块 1；T-0 释放 lock 1</li> <li>Thread-0 拿到 lock 2 同时 Thread-1 拿到 lock1；T-0 执行代码块 2 同时 T-1 执行代码块 1；释放 T-0 释放 lock 2 同时 T-1 释放 lock 1</li> <li>Thread-1 拿到 lock 2；T-1 执行代码块 2；T-1 释放 lock 2</li> <li>打印结束</li></ol></li> <li><p><strong>同步方法</strong><br>
使用 <code>synchronized</code> 修饰普通方法，此时锁对象默认为 <code>this</code> 对象。<br>
实例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
   <span class="token keyword">static</span> <span class="token class-name">Main</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

   <span class="token annotation punctuation">@Override</span>
   <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法开始====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>

   <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
      <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>

      thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      thread1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      thread2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Thread-0 进入 <code>run()</code> 调用 <code>method()</code> 时拿到锁，执行完毕释放后交给 Thread-1.</p></li></ol></li> <li><p>类锁<br>
对于一个 Java 类来说，有且只有一个字节码对象（Class 对象）。所以当一个类拥有众多实例时，在使用类锁后，同一时刻只有一个实例可以访问资源。</p> <ol><li><p><strong>同步静态方法</strong><br>
当同一个类的不同对象生成的线程试图访问同一个被锁定的方法时，两个线程仍然会并行执行该方法。只有被锁定的方法是静态方法时，该锁变为类锁形式，只有拿到锁的线程才能执行目标方法。</p> <p>实例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建实例</span>
    <span class="token keyword">static</span> <span class="token class-name">Main</span> instance1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Main</span> instance2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// 静态方法</span>
    <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法开始====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token keyword">try</span> <span class="token punctuation">{</span>
             <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token punctuation">}</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
       <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
       <span class="token comment">// 线程分别使用不同 instance 实例来创建</span>
       <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance1<span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance2<span class="token punctuation">)</span><span class="token punctuation">;</span>

       thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

       thread1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       thread2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
       <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><strong>同步字节码对象（代码块）</strong><br>
当锁对象为类的字节码时，无论这个类的哪一个实例试图访问该代码块均需要拿到锁。但当锁对象为 <code>this</code> 对象时，不同实例并行运行被锁的代码块。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">Main</span> instance1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">static</span> <span class="token class-name">Main</span> instance2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">synchronized</span> <span class="token punctuation">(</span><span class="token class-name">Main</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步代码块开始====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">try</span> <span class="token punctuation">{</span>
                <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步代码块结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance2<span class="token punctuation">)</span><span class="token punctuation">;</span>

        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        thread1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ol></li></ul> <div class="custom-block warning"><p class="custom-block-title">值得注意的是</p> <p>当不同线程使用同一个实例创建时，不管使用对象锁还是类锁都可以起到效果。</p></div> <div class="custom-block tip"><p class="custom-block-title">使用 <code>synchronized</code> 的几种常见情况</p> <ol><li><p>两个线程同时访问一个对象的同步方法<br>
即由同一个实例生成的两个线程，访问被锁定 <code>this</code> 的代码块或方法。锁生效，两个线程争夺同一把锁。</p></li> <li><p>两个线程同时访问两个对象的同步方法<br>
即由两个不同实例生成的两个线程，访问被锁定的 <code>this</code> 的代码块或方法。锁失效，锁定的是本身对象，而不是公共的对象。</p></li> <li><p>两个线程访问 <code>synchronized</code> 修饰的静态方法<br>
静态方法是属于类的，当由两个不同实例生成的连那个线程访问这样的静态方法时，锁生效。（例子等同于同步静态方法中的实例）</p></li> <li><p>两个线程同时访问同步方法和非同步方法<br>
两个线程由相同实例生成，其中一个被访问的方法被 <code>this</code> 锁定，规定一个线程执行被锁定方法，另一个执行非锁定方法。结果是两线程异步执行两个方法，不上锁的方法不受控制。<br>
实例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">Main</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 两个线程异步启动，其中指定线程 1 执行同步方法，线程 2 执行异步方法</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Thread-0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">methodSynchronized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">methodAsynchronous</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">methodSynchronized</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法开始====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodAsynchronous</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====异步方法开始====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====异步方法结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>

        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        thread1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>访问同一个对象的不同普通同步方法<br>
当两个基于同一个对象生成的线程分别执行不同的被锁定的方法时，两个线程同步执行。随机一个线程先拿到锁开始执行对应方法，完毕后第二个线程拿到锁执行对应方法。<br>
实例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">Main</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 两个线程异步启动，其中指定线程 1 执行同步方法 1，线程 2 执行同步方法 2 方法</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Thread-0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">methodSynchronized1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">methodSynchronized2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">methodSynchronized1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法 1 开始====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法 1 结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">methodSynchronized2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法 2 开始====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法 2 结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>

        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        thread1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>同时访问静态被 <code>synchronized</code> 修饰和非静态被 <code>synchronized</code> 修饰的方法<br>
当两个线程生成自同一个对象去执行对应方法时，由于两个被锁的方法锁定范围不同，两个线程依然异步执行。就算两个线程生成自不同对象，也会异步执行。只有锁定范围和线程生成匹配才会同步执行。</p> <div class="language-java extra-class"><pre class="language-java"><code> <span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
     <span class="token keyword">static</span> <span class="token class-name">Main</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

     <span class="token annotation punctuation">@Override</span>
     <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token comment">// 两个线程异步启动，其中指定线程 1 执行同步静态方法 1，线程 2 执行同步方法 2 方法</span>
         <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Thread-0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
             <span class="token function">methodSynchronizedStatic</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
             <span class="token function">methodSynchronizedNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
     <span class="token punctuation">}</span>

     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">methodSynchronizedStatic</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步静态方法 1 开始====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">try</span> <span class="token punctuation">{</span>
             <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步静态方法 1 结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">methodSynchronizedNormal</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法 2 开始====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token keyword">try</span> <span class="token punctuation">{</span>
             <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
             e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token punctuation">}</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法 2结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

     <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
         <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>

         thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

         thread1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         thread2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
         <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>
 <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>方法抛出异常<br>
随机一个线程拿到锁后开始执行，但若方法方法抛出异常后 Java 会释放同步锁，下一个进程拿到锁后执行后续代码。<br>
实例：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token keyword">implements</span> <span class="token class-name">Runnable</span> <span class="token punctuation">{</span>
    <span class="token keyword">static</span> <span class="token class-name">Main</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token string">&quot;Thread-0&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">methodSynchronizedWithException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token function">methodSynchronizedWithoutException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span>  <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">methodSynchronizedWithException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步异常方法 1 开始====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 创建异常</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">RuntimeException</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//        System.out.println(&quot;====同步异常方法 1 结束====&quot;);</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">methodSynchronizedWithoutException</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法 2 开始====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">currentThread</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">Thread</span><span class="token punctuation">.</span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">InterruptedException</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====同步方法 2结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">InterruptedException</span> <span class="token punctuation">{</span>
        <span class="token class-name">Thread</span> thread1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Thread</span> thread2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Thread</span><span class="token punctuation">(</span>instance<span class="token punctuation">)</span><span class="token punctuation">;</span>

        thread1<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread2<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        thread1<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        thread2<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====结束====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>运行结果：<br> <img src="/img/synchronizedWithException.png" alt="Synchronized With Exception"></p></li> <li><p>一个线程访问一个被 <code>synchronized</code> 修饰的方法，但方法中调用了另一个普通方法<br>
会造成线程不安全，<code>synchronized</code> 只对本方法起效，当运行跳出方法后不再同步。</p></li></ol></div> <br> <h4 id="synchronized-性质"><a href="#synchronized-性质" class="header-anchor">#</a> <strong><code>synchronized</code> 性质</strong></h4> <ul><li>可重入
<ul><li>一个线程访问拿到锁执行外层方法后，内层方法可再次获得锁</li> <li><em>作用</em>：避免死锁，提升封装性<br>
例如 <code>method1()</code> 中某语句调用了 <code>method2()</code> ，且两个方法都被 <code>synchronized</code> 修饰。若 <code>synchronized</code> 不具有可重入性，线程拿到锁执行 <code>method1()</code> 时会由于当前方法未执行完而不释放锁，而 <code>method2()</code> 需要锁才能继续执行，陷入死锁状态。</li> <li><em>粒度</em>：线程（非调用）</li></ul></li> <li>不可中断
<ul><li>只有当一个线程释放锁后另一个线程才能拿到锁</li></ul></li></ul> <h4 id="synchronized-原理"><a href="#synchronized-原理" class="header-anchor">#</a> <strong><code>synchronized</code> 原理</strong></h4> <ul><li>获取与释放
<ul><li><p>内置锁（监视器锁）<br> <code>synchronized</code> 修饰的方法或代码块，在执行时获取锁，再完成或抛出异常时释放锁。等同于 <code>java.utils.concurrent</code> 所提供的 <code>ReentrantLock</code>.</p> <p><strong>实例</strong>：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span></span><span class="token class-name">Lock</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token namespace">java<span class="token punctuation">.</span>util<span class="token punctuation">.</span>concurrent<span class="token punctuation">.</span>locks<span class="token punctuation">.</span></span><span class="token class-name">ReentrantLock</span><span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Main</span> <span class="token punctuation">{</span>
    <span class="token comment">// 创建由 Lock 实现的可重入锁</span>
    <span class="token class-name">Lock</span> lock <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">synchronized</span> <span class="token keyword">void</span> <span class="token function">methodWithSynchronized</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====执行同步方法====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">methodWithReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        lock<span class="token punctuation">.</span><span class="token function">lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span> <span class="token punctuation">{</span>
            <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;====执行可重入锁所方法====&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
            lock<span class="token punctuation">.</span><span class="token function">unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Main</span> instance <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 两个方法等价</span>
        instance<span class="token punctuation">.</span><span class="token function">methodWithSynchronized</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        instance<span class="token punctuation">.</span><span class="token function">methodWithReentrantLock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p><code>monitorenter</code> 和 <code>moniterexit</code></p> <ul><li>内置锁是通过 <code>monitorenter</code> 和 <code>moniterexit</code> 指令来实现的。</li> <li>在需要获取锁定的地方执行 <code>monitorenter</code>，在释放的地方执行 <code>monitorexit</code>。但是 Java 无法直接判断需要释放锁的情形，所以在正常释放和异常退出都单独执行 <code>monitorexit</code>。</li> <li><code>monitorenter</code> 会使锁计数器 +1，<code>monitorexit</code> 会使锁计数器 -1. 每个对象都关联于一个 monitor，且同一时间只有一个对象可以获得 monitor 锁。</li> <li><code>monitorenter</code> ：若当前计数器为 0，则意味着当前 monitor 无锁，则立即获得锁并使得计数器 +1；若当前线程重入锁，则计数器继续 +1；若其他线程访问到计数器不为 0 的 monitor，进入阻塞状态，直到计数器变为 0 重新获得锁。</li> <li><code>monitorexit</code> ：若当前线程拥有锁，在执行该指令时，计数器 -1. 当执行后计数器为 0 意味着当前线程执行完毕释放锁，若不为 0 则继续持有锁。
<strong>实例</strong>：</li></ul> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">method</span><span class="token punctuation">(</span><span class="token class-name">Thread</span> thread<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">synchronized</span> <span class="token punctuation">(</span>lock<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>所对应的字节码反编译为：</p> <div class="language- extra-class"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-text"><code>public void method(java.lang.Thread);
descriptor: (Ljava/lang/Thread;)V
flags: (0x0001) ACC_PUBLIC
Code:
stack=2, locals=4, args_size=2
    0: aload_0
    1: getfield      #3                  // Field lock:Ljava/lang/Object;
    4: dup
    5: astore_2
    6: monitorenter
    7: aload_2
    8: monitorexit
    9: goto          17
    12: astore_3
    13: aload_2
    14: monitorexit
    15: aload_3
    16: athrow
    17: return
...
</code></pre></div></li></ul></li> <li>可重入原理<br>
利用锁计数器来实现。JVM 负责跟踪对象被加锁的次数。</li> <li>可见性原理<br>
根据 Java 内存模型（JMM），每一个线程拥有一个本地内存，其中保存着共享资源的副本。<br> <img src="/img/JMM.png" alt="JMM"><br>
在线程 A 向 线程 B 通信时，主内存作为其沟通桥梁。当资源使用 <code>synchronized</code> 修饰时，会保证线程A 在完全执行完毕将数据写回主内存后再由线程 B 从主内存中获取。保证了线程的本地内存与主内存数据一致。</li></ul> <h4 id="synchronized-的缺陷"><a href="#synchronized-的缺陷" class="header-anchor">#</a> <code>synchronized</code> 的缺陷</h4> <ul><li>效率低<br>
锁释放的情形少。无法设定获取锁超时时间，不能中断一个正在等待获得锁的线程。</li> <li>不灵活
相比读写锁，<code>synchronized</code> 获取释放锁机制单一。每个锁仅能锁定单一对象，在某些情景下不能够完全满足需求。</li> <li>无法知晓是否成功获得了锁
失去了在获取成功或失败条件下执行特定逻辑的能力。</li></ul> <h3 id="线程通信"><a href="#线程通信" class="header-anchor">#</a> 线程通信</h3> <p>通过等待唤醒机制调节线程之间的执行顺序。</p> <p>线程在等待期间存在于线程池中，线程池本质上是一个存储线程的队列。<br>
A1 A2 C1 C2 → ()<br>
A1(Running)<br>
A1 A2 C1 C2 → ()<br>
A1(Running, <font color="red">wait()[A1]</font>)<br>
A2 C1 C2 → (A1)<br>
A2(Running, <font color="red">wait()[A2]</font>)<br>
C1 C2 → (A1 A2)<br>
C1(Running, <font color="green">notify()[A1]</font>)<br>
A1 C1 C2 → (A2)<br>
C1(Running, <font color="red">wait()[C1]</font>)<br>
A1 C2 → (A2, C1)<br>
C2(Running, <font color="red">wait()[C2]</font>)<br>
A1 → (A2, C1, C2)<br>
A1(Running, <font color="green">notify()[A2]</font>)<br>
A1 A2 → (C1, C2)<br>
A1(Running, <font color="red">wait()[A1]</font>)<br>
A2 → (C1, C2, A1)<br>
A2(Running, <font color="red">wait()[A2]</font>)<br>
→ (C1, C2, A1, A2)</p> <p><code>sleep()</code>需要制定睡眠时间，结束自然恢复。释放执行权，不释放锁对象，在<code>Thread</code>类中，为静态方法
<code>wait()</code>可以指定等待时间，也可不指定，此时需要唤醒。释放执行权，释放锁对象。在<code>Object</code>类中，为普通方法。必须结合锁使用（两对象相同）。</p> <h3 id="死锁"><a href="#死锁" class="header-anchor">#</a> 死锁</h3> <p><strong>产生原因</strong><br>
多个线程；共享资源过多；锁对象不统一；锁嵌套。</p> <p><strong>避免死锁</strong><br>
统一锁对象、减少锁嵌套。</p> <p><strong>同步与异步</strong></p> <ul><li><p>若某对象在某时间段内只允许一个线程操作即为同步，反之异步。</p></li> <li><p>同步一定安全。</p></li> <li><p>不安全一定异步。</p></li></ul> <h3 id="线程状态"><a href="#线程状态" class="header-anchor">#</a> 线程状态</h3> <p><img src="/img/%E7%BA%BF%E7%A8%8B%E7%8A%B6%E6%80%81.png" alt="线程状态"></p> <ul><li><p>阻塞：不执行代码抢占资源</p></li> <li><p>冻结：不执行代码，不抢占资源</p></li></ul> <h3 id="守护线程"><a href="#守护线程" class="header-anchor">#</a> 守护线程</h3> <ul><li><p>守护其他线程的执行，被守护线程结束后，守护线程无论完成与否随之结束</p></li> <li><p>只要代码中出现守护线程，程序中的线程只能是守护线程或者被守护线程<br>
若存在多个被守护线程，则最后一个被守护线程为结束标志</p></li></ul> <h3 id="线程优先级"><a href="#线程优先级" class="header-anchor">#</a> 线程优先级</h3> <ul><li><p>线程拥有 1-10 共十级优先级</p></li> <li><p>优先级越高，理论上抢到资源的概率越大</p></li> <li><p>相邻两个优先级几乎没有差别<br>
相差5级以上，略有差别</p></li></ul> <h2 id="枚举"><a href="#枚举" class="header-anchor">#</a> 枚举</h2> <h3 id="基本信息-5"><a href="#基本信息-5" class="header-anchor">#</a> 基本信息</h3> <p><strong>Package</strong> java.lang<br> <code>public abstract class Enum&lt;E extends Enum&lt;E&gt;&gt;</code></p> <ul><li><p>取值固定且能一一列举</p></li> <li><p>枚举常量必须定义在首行，用<code>,</code>隔开，以<code>;</code>结尾</p></li> <li><p>枚举类中允许定义属性和方法</p></li> <li><p>枚举类构造函数默认且只能为私有<br>
可以携带参数，在枚举后添加括号</p></li> <li><p>可以定义抽象方法，以匿名内部类的形式实现</p></li> <li><p><code>switch(表达式)</code><br>
表达式值新添Enum常量</p></li></ul> <h2 id="string类"><a href="#string类" class="header-anchor">#</a> <code>String</code>类</h2> <h3 id="基本信息-6"><a href="#基本信息-6" class="header-anchor">#</a> 基本信息</h3> <p><strong>Package</strong> java.lang<br> <code>public final class String</code></p> <ul><li><p><code>String</code>类是一个最终类，表示字符串。</p></li> <li><p>所有字符串都是<code>String</code>类的实例。</p></li> <li><p>字符串是常量，创建后不可更改，但可以被共享。</p></li></ul> <h3 id="重要方法-3"><a href="#重要方法-3" class="header-anchor">#</a> 重要方法</h3> <ol><li><p><code>char chatAt()</code><br>
获取字符串指定下标字符。</p></li> <li><p><code>int length()</code><br>
获取字符串长度。</p></li> <li><p><code>char[] toCharArray()</code><br>
将字符串转化为字符数组。</p></li> <li><p>其他不改变原串的方法</p> <table><thead><tr><th>方法</th> <th>描述</th> <th>备注</th></tr></thead> <tbody><tr><td><code>int compareTo(String another)</code></td> <td>判断两个字符串大小，根据返回值正负来确定</td> <td></td></tr> <tr><td><code>String concat(String str)</code></td> <td>拼接字符串，不该面原字符串</td> <td></td></tr> <tr><td><code>boolean contains(String str)</code></td> <td>是否包含该子串</td> <td></td></tr> <tr><td><code>boolean equals(Object o)</code></td> <td>是否相等</td> <td></td></tr> <tr><td><code>byte[] getBytes()</code></td> <td>将字符串转化为字节数组</td> <td>通过<code>String</code>的构造方法将字节数组转化为字符串</td></tr> <tr><td><code>int indexOf(int ch, int index)</code></td> <td>指定下标开始寻找指定字符第一次出现的位置</td> <td></td></tr> <tr><td><code>static String valueOf()</code></td> <td>将传入值转换为字符串</td> <td>传入对象则会调用对象的<code>toString()</code>；<br>传入字符数组对象，则打印其内容</td></tr> <tr><td><code>String replaceAll(String reg, String str)</code></td> <td>替换指定内容</td> <td></td></tr> <tr><td><code>boolean matches(String reg)</code></td> <td>是否匹配指定规则</td> <td></td></tr> <tr><td><code>String[] split(String reg)</code></td> <td>按指定规则切割字符串</td> <td>作为切割的符号会被消除；<br>若两个切割符号相连，则会被分出一个空字符串<code>&quot;&quot;</code></td></tr></tbody></table></li></ol> <div class="custom-block tip"><p class="custom-block-title">特别地</p> <ul><li><p>拼接字符串可以使用运算符&quot;<code>+</code>&quot;，本质上 Java 编译器会调用<code>StringBuffer</code>（或类似技术）来实现这个拼接操作。</p></li> <li><p>拼接多个字符串建议使用<code>StringBuilder</code>类，少量字符串使用<code>+</code>运算符</p></li> <li><p><code>StringBuilder</code>和<code>StringBuffer</code>使用方法完全一致</p> <ul><li><p><code>StringBuilder</code>线程不安全</p></li> <li><p><code>StringBuffer</code>线程安全</p></li></ul></li> <li><p>故代码：<br> <strong>Input</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
s <span class="token operator">+=</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>实际上的执行效果是：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> s <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在最后的<code>toString()</code>中生成了新的字符串对象，类似于（真实过程更加复杂）：</p> <div class="language-java extra-class"><pre class="language-java"><code>s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span> <span class="token punctuation">(</span><span class="token string">&quot;ab&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <p><strong>分析代码</strong><br> <strong>Input</strong></p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">&quot;ab&quot;</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;ab&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">String</span> s4 <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
s4 <span class="token operator">+=</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
</code></pre></div><ol><li><p>第一句</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> s1 <span class="token operator">=</span> <span class="token string">&quot;ab&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>内存图：<br> <img src="/img/String_01.jpg" alt="String s1 = &quot;ab&quot;;"></p></li> <li><p>第二句</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> s2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">String</span><span class="token punctuation">(</span><span class="token string">&quot;ab&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>内存图：<br> <img src="/img/String_02.jpg" alt="String s2 = new String(&quot;ab&quot;);"></p></li> <li><p>第三句</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">String</span> s4 <span class="token operator">=</span> <span class="token string">&quot;a&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>内存图：<br> <img src="/img/String_03.jpg" alt="String s4 = &quot;a&quot;;"></p></li> <li><p>第四句</p> <div class="language-java extra-class"><pre class="language-java"><code>s4 <span class="token operator">+=</span> <span class="token string">&quot;b&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p>由<code>StringBuilder</code>实现<code>+=</code>操作，具体步骤为：</p> <ol><li><p>生成<code>StringBuilder</code>对象</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>内存图：<br> <img src="/img/String_04.jpg" alt="new StringBuilder(&quot;a&quot;)"></p></li> <li><p><code>StringBuilder</code>对象取<code>append()</code>方法拼接字符串</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>内存图：
<img src="/img/String_05.jpg" alt="new StringBuilder(&quot;a&quot;).append(&quot;b&quot;)"><br>
堆内存<code>0x3f4c</code>断开与常量&quot;a&quot;(<code>0x45fa</code>)的链接，转而链接常量&quot;ab&quot;(<code>0x003d</code>)。</p></li> <li><p>调用<code>toString()</code>生成新的<code>String</code>对象</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>内存图：<br> <img src="/img/String_06.jpg" alt="new StringBuilder(&quot;a&quot;).append(&quot;b&quot;).toString()"></p></li> <li><p>将新生成的<code>String</code>对象的管理权交给<code>s4</code>（赋值）</p> <div class="language-java extra-class"><pre class="language-java"><code>s4 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">StringBuilder</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>内存图：<br> <img src="/img/String_07.jpg" alt="s4 = new StringBuilder(&quot;a&quot;).append(&quot;b&quot;).toString();">
栈内存内<code>s4</code>断开与常量&quot;a&quot;(<code>0x45fa</code>)的链接，转而链接堆内存<code>0x7bce</code>。</p></li> <li><p>结束操作，最终结果<br>
内存图：<br> <img src="/img/String_08.jpg" alt="完成"></p></li></ol></li></ol></div> <div class="custom-block tip"><p class="custom-block-title">关于编码</p> <p>按照某些规律将字符映射成字节。这个记录规则就是编码表</p> <table><thead><tr><th>名称</th> <th>内容</th> <th>特点</th></tr></thead> <tbody><tr><td>ASCII</td> <td>0 至 127</td> <td>不完全</td></tr> <tr><td>西欧码表 ISO-8859-1</td> <td>西欧字符</td> <td>一个字母占 1 字节</td></tr> <tr><td>GB2312</td> <td>常见基本简体汉字和部分常用繁体汉字</td> <td>一个字符占 2 字节</td></tr> <tr><td>UTF-8</td> <td>常见语言的常见字符</td> <td>一个字符占 3 字节</td></tr></tbody></table></div> <p>→ <a href="#scanner%E7%B1%BB">关于<code>Scanner</code>类</a></p> <h3 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h3> <p>正则表达式本质上是<strong>指定匹配</strong>或<strong>筛选规则</strong>的一系列表达式。</p> <p><strong>规则</strong></p> <ul><li><p>元字符与限定符：正则表达式中含有表达特殊意义的字符，这些字符成为元字符；在正则表达式中，需要表示元字符出现次数等逻辑规则时，使用限定符来表示。</p></li> <li><p>在 Java 中，由于使用<code>\</code>转义且某些元字符中本身包含<code>\</code>，故在使用时需要写作<code>\\</code>。如：表示任意一个数字的正则表达式在 Java 中写作<code>\\d</code>。</p></li></ul> <table><thead><tr><th>元字符/限定符</th> <th>描述</th></tr></thead> <tbody><tr><td><code>.</code></td> <td>任意字符</td></tr> <tr><td><code>\d</code></td> <td>0至9任意一个数字</td></tr> <tr><td><code>\D</code></td> <td>任意一个非数字</td></tr> <tr><td><code>\s</code></td> <td>空格类字符，如<code>\t</code>, <code>\n</code>, <code>\x0B</code>, <code>\f</code>, <code>\r</code></td></tr> <tr><td><code>\S</code></td> <td>任意一个非空格类字符</td></tr> <tr><td><code>\w</code></td> <td>除<code>$</code>外的可用于标识符的字符（字母(a-zA-Z)、数字(0-9)、下划线(_)）</td></tr> <tr><td><code>\W</code></td> <td>任意一个不能用于标识符的字符</td></tr> <tr><td><code>^</code></td> <td>串开头</td></tr> <tr><td><code>$</code></td> <td>串结尾</td></tr> <tr><td><code>|</code></td> <td>或</td></tr> <tr><td><code>+</code></td> <td>出现1次或多次</td></tr> <tr><td><code>?</code></td> <td>出现0次或1次</td></tr> <tr><td><code>*</code></td> <td>出现0次或多次</td></tr> <tr><td><code>{n}</code></td> <td>出现n次</td></tr> <tr><td><code>{n,}</code></td> <td>出现至少n次</td></tr> <tr><td><code>{n,m}</code></td> <td>出现n至m次</td></tr> <tr><td><code>()</code></td> <td>捕获组</td></tr> <tr><td><code>[]</code></td> <td>单个字符</td></tr> <tr><td><code>\n</code></td> <td>编号为n的捕获组</td></tr></tbody></table> <blockquote><p><strong>这里：{n,m|n,m∈N<sub>+</sub>}</strong></p></blockquote> <p><strong>捕获组</strong></p> <ul><li><p>起编号作用</p></li> <li><p>从左括号出现的位置开始计算</p></li></ul> <p>例如：<code>(A((BC(D))E))F)</code></p> <table><thead><tr><th>捕获组</th> <th>内容</th></tr></thead> <tbody><tr><td><code>\\1</code></td> <td><code>A((BC(D))E)</code></td></tr> <tr><td><code>\\2</code></td> <td><code>(BC(D))E</code></td></tr> <tr><td><code>\\3</code></td> <td><code>BC(D)</code></td></tr> <tr><td><code>\\4</code></td> <td><code>D</code></td></tr> <tr><td><code>\\5</code></td> <td><code>F</code></td></tr></tbody></table> <p><strong><code>String</code>类中的使用</strong></p> <ul><li><p>使用<code>boolean matches(String regex)</code>来使用正则表达式验证字符串是否符合规则。</p></li> <li><p><code>String</code>类还提供了其他的验证规则函数，如：<code>boolean startsWith(String prefix)</code>用来验证是否由某字符串打头。</p></li></ul> <blockquote><hr></blockquote> <h2 id="包装类"><a href="#包装类" class="header-anchor">#</a> 包装类</h2> <h3 id="基本信息-7"><a href="#基本信息-7" class="header-anchor">#</a> 基本信息</h3> <p>对于每种基本数据类型, Java 都提供了与其对应的类。这些类称为包装类。</p> <table><thead><tr><th style="text-align:center;">基本数据类型</th> <th style="text-align:left;"><code>byte</code></th> <th><code>short</code></th> <th><code>int</code></th> <th><code>long</code></th> <th><code>float</code></th> <th><code>double</code></th> <th><code>char</code></th> <th><code>boolean</code></th></tr></thead> <tbody><tr><td style="text-align:center;">包装类</td> <td style="text-align:left;"><code>Byte</code></td> <td><code>Short</code></td> <td><code>Integer</code></td> <td><code>Long</code></td> <td><code>Float</code></td> <td><code>Double</code></td> <td><code>Character</code></td> <td><code>Boolean</code></td></tr></tbody></table> <blockquote><p><code>int</code>和<code>char</code>所对应的包装类为单词的全拼。</p></blockquote> <h3 id="装箱"><a href="#装箱" class="header-anchor">#</a> 装箱</h3> <p>将<strong>基本数据类型转换为对应的引用数据类型对象</strong>的操作。</p> <h3 id="自动装箱"><a href="#自动装箱" class="header-anchor">#</a> 自动装箱 <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>Java SE 5.0+</span></h3> <p>将一个<strong>基本数据类型变量直接赋值给对应的引用数据类型对象</strong>。本质上调用了对应的<code>valueOf()</code>。</p> <p>例如：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Integer</span> integer <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</code></pre></div><p>相当于：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token class-name">Integer</span> integer <span class="token operator">=</span> <span class="token class-name">Integer</span><span class="token punctuation">.</span><span class="token function">valueOf</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">注意</p> <p>所有相同类型地包装类对象之间值的比较，应当全部使用equals()。</p> <p>在值范围在 -128 到 127内的赋值，Integer对象会在IntegerCache.cache中产生，会服用已有对象。此时使用==比较是安全的。<br>
但在范围之外的所有数据会在堆中产生，不会复用已有对象。<br>
故推荐全部使用equals()来规避风险。</p></div> <h3 id="自动拆箱"><a href="#自动拆箱" class="header-anchor">#</a> 自动拆箱 <span class="badge tip" style="vertical-align:top;" data-v-15b7b770>Java SE 5.0+</span></h3> <p>将一个引用数据类型对象直接赋值给对应基本数据类型变量。本质上调用了对象的<code>xxxValue()</code>。</p> <p>例如：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> i <span class="token operator">=</span> integer<span class="token punctuation">;</span>
</code></pre></div><p>相当于：</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">int</span> i <span class="token operator">=</span> integer<span class="token punctuation">.</span><span class="token function">intValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当发生基本数据类型和包装类运算时，会发生自动拆箱。</p> <div class="custom-block tip"><p class="custom-block-title">关于哈希码</p> <ul><li><p>整数的哈希码是其本身，但小数的哈希码需要经过计算才能得到。</p></li> <li><p>字符的哈希码是其对应的编码。</p></li> <li><p>布尔类型的哈希码为特殊值，如<code>true</code>的哈希码为<code>1231</code>；<code>false</code>为<code>1237</code>。</p></li> <li><p>八种基本数据类型的哈希码都为固定值。</p></li></ul></div> <h2 id="math类"><a href="#math类" class="header-anchor">#</a> <code>Math</code>类</h2> <h3 id="基本信息-8"><a href="#基本信息-8" class="header-anchor">#</a> 基本信息</h3> <p><strong>Package</strong> java.lang<br> <code>public final class Math</code></p> <p><code>Math</code>类是一个最终类，其构造函数是私有的。</p> <p>该类提供了一系列静态方法，这些方法实现了基本的数学运算，如三角函数、绝对值、平方根等。</p> <h3 id="重要方法-4"><a href="#重要方法-4" class="header-anchor">#</a> 重要方法</h3> <ol><li><p><code>static double ceil(double a)</code><br>
向上取整</p></li> <li><p><code>static double floor(double a)</code><br>
向下取整</p></li> <li><p><code>static long round(double a)</code>/<code>static int round(float a)</code><br>
四舍五入</p></li> <li><p><code>static double sqrt(double a)</code><br>
求平方根</p></li> <li><p><code>static double pow(double a, double b)</code><br>
求幂 (a<sup>b</sup>)</p></li> <li><p><code>static double random()</code><br>
返回一个随机数 (0.0≤x&lt;1.0)</p></li></ol> <h3 id="strictfp关键字"><a href="#strictfp关键字" class="header-anchor">#</a> <code>strictfp</code>关键字</h3> <p>精确浮点(strict float point)，用于修饰类、接口和方法。</p> <p>被修饰的代码在执行中以80位二进制数来运算小数，结果会保留为64位。</p> <div class="custom-block tip"><p class="custom-block-title">特别的</p> <p>当适用精确运算时，Java 提供了<code>BigDecimal</code>类。</p> <p>这个类中对基础运算（如加、减、乘、除）提供了方法支持，故，不能使用运算符（如<code>+</code>、<code>-</code>、<code>*</code>、<code>/</code>）来进行运算。</p></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ZweiRm/localhost-8080.github.io/edit/master/docs/java/API-lang.md" target="_blank" rel="noopener noreferrer">帮助我改善此页面！</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/29/2021, 9:44:40 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/java/API-introduction.html" class="prev">
        应用程序编程接口
      </a></span> <span class="next"><a href="/java/API-util.html">
        API-工具类库 (Package java.util)
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/assets/js/app.a2454d80.js" defer></script><script src="/assets/js/3.3e1ac6b4.js" defer></script><script src="/assets/js/32.8ea40cfb.js" defer></script><script src="/assets/js/6.5d34e6c7.js" defer></script><script src="/assets/js/5.98c08254.js" defer></script>
  </body>
</html>
