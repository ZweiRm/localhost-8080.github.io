---
prev: ./API-io
next: ./references
---

# Java 虚拟机

## 内存管理概论
### 内存分区
![内存分区](/img/内存管理.jpg)

+ 寄存器  
  负责程序计数和任务调度

+ 本地方法栈  
  存储本地方法

+ 栈内存  
  执行代码块，存储局部变量

+ 堆内存  
  存储对象（对象生命周期结束后被`GC`回收）

+ 方法区  
  存储类的信息，一旦存入不再移除  
  方法区溢出会报`OutOfMemoryError`错误  
  其中：  
  + 静态区  
    存储静态属性和静态方法  
    静态属性存储在此区后自动赋默认值

  + 静态常量池  
    存储类成员属性和成员方法信息  

  + 运行时常量池  
    存储计算机常量和被`final`修饰的常量副本

### 1.5.2 垃圾分代回收机制
对象在堆内存中存储。当对象在使用完成后，会在某个不定的时刻被垃圾回收器`GC`解析。  
值得注意的是：**垃圾回收过程无法手动控制**。  
+ 堆内存分为**新生代区**和**老年代区**。  

+ 新生代区分为**伊甸园区**和**幸存区**。  

+ 一个新创建的对象会被生成在伊甸园区，若在伊甸园区的对象经过一次回收过程仍然存活，则被移动到幸存区。  

+ 幸存区的回收扫描频率略低于伊甸园区。在幸存区经过多次扫描，若对象仍然存活，则被移动到老年代区。

+ 老年代区的回收扫描频率会远远低于新生代区。

+ 当老年代区中的对象被回收时，会导致程序卡顿甚至崩溃。

+ 发生在新生代区的垃圾回收称为**初代回收 (Minor GC)**.

+ 发生在老年代区的垃圾回收称为**完全回收 (Full GC)**.