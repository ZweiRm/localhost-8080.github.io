<!DOCTYPE html>
<html lang="zh-CN" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>索引 | 本地煮鸡:8080</title>
    <meta name="description" content="一个博客, 会记录一些技术笔记">
    <meta name="generator" content="VitePress v1.6.3">
    <link rel="preload stylesheet" href="/assets/style.BVL8E0n4.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.inDXfB1Q.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.ejZ5Wcs9.js">
    <link rel="modulepreload" href="/assets/chunks/framework.DPDPlp3K.js">
    <link rel="modulepreload" href="/assets/mysql_indices.md.C4Ri8wDz.lean.js">
    <link rel="icon" href="./img/favicon.ico">
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-132436049-1"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-132436049-1");</script>
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0b0ada53></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0b0ada53>Skip to content</a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!----><span data-v-1168a8e4>本地煮鸡:8080</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>主页</span><!--]--></a><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>笔记</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/java/" data-v-35975db6><!--[--><span data-v-35975db6>Java</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b98bc113 data-v-35975db6><a class="VPLink link" href="/hello-world/" data-v-35975db6><!--[--><span data-v-35975db6>杂谈</span><!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-dc692963 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-cf11d7a2><span class="text" data-v-cf11d7a2><!----><span data-v-cf11d7a2>施工中笔记</span><span class="vpi-chevron-down text-icon" data-v-cf11d7a2></span></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><div class="items" data-v-b98bc113><!--[--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>编程语言</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/kotlin/" data-v-35975db6><!--[--><span data-v-35975db6>Kotlin</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/python/" data-v-35975db6><!--[--><span data-v-35975db6>Python</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>后端开发技术</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/web/" data-v-35975db6><!--[--><span data-v-35975db6>Web</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/spring/" data-v-35975db6><!--[--><span data-v-35975db6>Spring</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/mysql/" data-v-35975db6><!--[--><span data-v-35975db6>MySQL</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/redis/" data-v-35975db6><!--[--><span data-v-35975db6>Redis</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>学科基础</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/software-engineering/" data-v-35975db6><!--[--><span data-v-35975db6>软件工程</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/algorithm/" data-v-35975db6><!--[--><span data-v-35975db6>算法</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>机器学习</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/artificial-intelligence/" data-v-35975db6><!--[--><span data-v-35975db6>人工智能</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/deep-learning/" data-v-35975db6><!--[--><span data-v-35975db6>深度学习</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/recommender-systems/" data-v-35975db6><!--[--><span data-v-35975db6>推荐系统</span><!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/quantitative-methods-for-DA-AI/" data-v-35975db6><!--[--><span data-v-35975db6>数据分析与人工智能定量分析</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>大数据</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/hadoop/" data-v-35975db6><!--[--><span data-v-35975db6>Hadoop</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b98bc113 data-v-69e747b5><p class="title" data-v-69e747b5>Android Frameworks</p><!--[--><!--[--><div class="VPMenuLink" data-v-69e747b5 data-v-35975db6><a class="VPLink link" href="/framework/" data-v-35975db6><!--[--><span data-v-35975db6>Framework</span><!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><a class="VPLink link vp-external-link-icon VPNavBarMenuLink" href="https://gitee.com/zweirm/" target="_blank" rel="noreferrer" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>码云</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/about/" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>关于</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="ZweiRm/localhost-8080.github.io" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="ZweiRm/localhost-8080.github.io" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-8a42e2b4><button data-v-8a42e2b4>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 is-link" data-v-c40bc020 data-v-b3fd67f8><div class="item" tabindex="0" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/mysql/index.html" data-v-b3fd67f8><!--[--><h2 class="text" data-v-b3fd67f8>MySQL</h2><!--]--></a><!----></div><div class="items" data-v-b3fd67f8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/mysql/transaction.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>事务</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/mysql/indices.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>索引</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/mysql/lock.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>锁</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/mysql/divide.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>分库分表</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-b3fd67f8 data-v-b3fd67f8><div class="item" data-v-b3fd67f8><div class="indicator" data-v-b3fd67f8></div><a class="VPLink link link" href="/mysql/references.html" data-v-b3fd67f8><!--[--><p class="text" data-v-b3fd67f8>参考文献或资料</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _mysql_indices" data-v-39a288b8><div><h1 id="索引" tabindex="-1">索引 <a class="header-anchor" href="#索引" aria-label="Permalink to &quot;索引&quot;">​</a></h1><p>为了提高数据局查询效率，可以使用一些数据结构来解决。一般有有序数组、哈希表和树三种形式。</p><h2 id="适合索引的数据结构" tabindex="-1">适合索引的数据结构 <a class="header-anchor" href="#适合索引的数据结构" aria-label="Permalink to &quot;适合索引的数据结构&quot;">​</a></h2><h3 id="哈希表" tabindex="-1">哈希表 <a class="header-anchor" href="#哈希表" aria-label="Permalink to &quot;哈希表&quot;">​</a></h3><ul><li>一个键可以通过哈希函数计算得出一个值，根据值的不同可以将不同的记录放在对应值的结构下，一般情况下使用链表来对应同一个值的数据。具体方法有静态哈希和可扩展哈希。</li><li>哈希表适合等值查找的场景。在范围查找时只能依次遍历。</li></ul><h3 id="有序数组" tabindex="-1">有序数组 <a class="header-anchor" href="#有序数组" aria-label="Permalink to &quot;有序数组&quot;">​</a></h3><ul><li>通过对值进行排序得到有序数组来存放数据。</li><li>对于等值和范围查找都有较好的性能，但是在更新数据时可能需要大范围挪动数据。</li><li>适合作为静态存储引擎，即对数据不会修改的数据建立索引。</li></ul><h3 id="树" tabindex="-1">树 <a class="header-anchor" href="#树" aria-label="Permalink to &quot;树&quot;">​</a></h3><p>通过树也可以建立索引，将数据放在叶子结点，其余结点为索引结构。通过不同的叉树可以带来不同的 I/O 次数。常见的有二叉搜索树，B+ 树等实现。</p><h4 id="二叉搜索树" tabindex="-1">二叉搜索树 <a class="header-anchor" href="#二叉搜索树" aria-label="Permalink to &quot;二叉搜索树&quot;">​</a></h4><ul><li>在二叉搜索树中，要求左子树所有结点的值小于父节点；右子树所有结点的值大于父节点。</li><li>当这颗二叉树为平衡二叉树时，搜索目标值所用时间复杂度为 O(log(N)).</li></ul><h2 id="innodb-索引模型" tabindex="-1">InnoDB 索引模型 <a class="header-anchor" href="#innodb-索引模型" aria-label="Permalink to &quot;InnoDB 索引模型&quot;">​</a></h2><p>在 InnoDB 引擎中，采用了 B+ 树的形式才建立索引。对于同一张表，会建立两个索引：主键索引和非主键索引。</p><ul><li>主键索引<br> 也称为聚簇索引 (Clusterd Index)。以主键值建立树，叶子结点存储整行数据。</li><li>非主键索引<br> 也称为二级索引 (Secondary Index)。以索引列建立树，叶子结点存储主键的值。</li></ul><p>在具体查询过程中，如果采用主键进行查询的方式，则使用聚簇索引直接查找；若采用值查询的方式，则先在对应列的树中搜索，再根据得到的 ID 在聚簇索引中搜索，称为回表。由于回表需要查询两颗索引树，所以一般尽量使用主键查询。</p><p>叶子结点以数据页的形式保存，数据页内部使用单链表连接。InnoDB 数据按数据页为单位读写，将整个数据页读入内存，默认为 16KB.</p><p>其他类型的索引：</p><ul><li>唯一索引：要求索引列的值必须唯一，允许有空值。</li><li>全文索引：仅用于 MyISAM。对于较大数据的全文索引生成会耗时耗空间。</li><li>联合索引：多个字段联合在一起生成索引。</li><li>前缀索引：定义字符串的一部分作为索引。<br> 定义合适区分度的前缀索引，可以做到节省空间且不增添太多的查询成本。但是前缀索引会使得覆盖索引失效。</li></ul><h3 id="维护" tabindex="-1">维护 <a class="header-anchor" href="#维护" aria-label="Permalink to &quot;维护&quot;">​</a></h3><p>在增加或删除元素时，可能会导致索引各层结点的分裂与合并，会导致性能下降。</p><ul><li>一般情况下，我们使用自增主键可以减少由于值随机性带来的分裂操作。</li><li>当索引是唯一索引且有且仅有一个索引时，可以不考虑二级索引叶子结点容量占用问题，这时可以考虑直接将该字段作为主键。这样还可以规避回表带来的二次查询开销。</li></ul><h3 id="普通索引与唯一索引" tabindex="-1">普通索引与唯一索引 <a class="header-anchor" href="#普通索引与唯一索引" aria-label="Permalink to &quot;普通索引与唯一索引&quot;">​</a></h3><p>普通索引是最基本的索引，它没有任何限制。而唯一索引要求索引列的值必须唯一，但允许有空值。</p><h2 id="覆盖索引与联合索引" tabindex="-1">覆盖索引与联合索引 <a class="header-anchor" href="#覆盖索引与联合索引" aria-label="Permalink to &quot;覆盖索引与联合索引&quot;">​</a></h2><p>当设计表时，可以根据查询需求使用覆盖索引和联合索引的方式来减少回表的发生，以此来提升性能。</p><h3 id="覆盖索引" tabindex="-1">覆盖索引 <a class="header-anchor" href="#覆盖索引" aria-label="Permalink to &quot;覆盖索引&quot;">​</a></h3><p>当在某二级索引中，叶子结点已经包含了要查询内容，则直接返回结果而不回表查询。这样的情况称为覆盖索引。</p><p>例如有表：</p><table tabindex="0"><thead><tr><th style="text-align:center;">id</th><th style="text-align:center;">k</th><th style="text-align:center;">name</th></tr></thead><tbody><tr><td style="text-align:center;">100</td><td style="text-align:center;">1</td><td style="text-align:center;"><code>null</code></td></tr><tr><td style="text-align:center;">200</td><td style="text-align:center;">2</td><td style="text-align:center;"><code>null</code></td></tr><tr><td style="text-align:center;">300</td><td style="text-align:center;">3</td><td style="text-align:center;"><code>null</code></td></tr><tr><td style="text-align:center;">500</td><td style="text-align:center;">5</td><td style="text-align:center;"><code>null</code></td></tr><tr><td style="text-align:center;">600</td><td style="text-align:center;">6</td><td style="text-align:center;"><code>null</code></td></tr><tr><td style="text-align:center;">给字段 k 设置了索引。</td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr></tbody></table><p>对于语句 <code>SELECT ID FROM T WHERE k BETWEEN 3 AND 5;</code> 来说，条件中规定了 k 的范围查找并且投影后仅需要字段 ID. 对于 k 的二级索引树来说，其叶子结点所保存的内容正好是最终所需要的字段 ID, 故这条语句将不进行回表，直接在 k 的二级索引树中查找并返回结果。</p><h3 id="联合索引" tabindex="-1">联合索引 <a class="header-anchor" href="#联合索引" aria-label="Permalink to &quot;联合索引&quot;">​</a></h3><p>将多个字段联合在一起生成索引称为联合索引。索引树中索引结构为第一个字段，叶子结点值存储被索引所有字段的数据。数据按照声明索引的顺序排列。</p><h4 id="最左前缀匹配原则" tabindex="-1">最左前缀匹配原则 <a class="header-anchor" href="#最左前缀匹配原则" aria-label="Permalink to &quot;最左前缀匹配原则&quot;">​</a></h4><p>因为联合索引按照既定顺序排列元素，所以不同的查询条件可能覆盖不同的索引项，而以此为基础会导致不同的结果（例如索引失效，覆盖索引等）。为了保证最高的搜索效率，联合索引的顺序按频率高到低排列。<br> 例如：一个表有字段 a, b 和 c. 常有对 a 字段的单独查询和以 a 字段查 b 的查询。那么建立 (a, b) 的联合索引就可以覆盖这两种查询。</p><p>范围查找可以使用索引，但最多只能应用一次。当条件遇到 <code>BETWEEN AND</code>, <code>&lt;</code>, <code>&gt;</code>, <code>LIKE</code> 后，后面的列不能使用索引。<br> 例如：一个表有字段 a, b 和 c. 对 (a, b) 建立联合索引。查询 <code>SELECT * FROM T WHERE a LIKE &#39;J%&#39; AND b = 3;</code> 会使用索引对 a 进行范围查找，但 b 只能在索引结果基础上回表查询或者使用索引下推。</p><h4 id="索引下推" tabindex="-1">索引下推 <span class="VPBadge tip"><!--[-->MySQL 5.6+<!--]--></span> <a class="header-anchor" href="#索引下推" aria-label="Permalink to &quot;索引下推 &lt;Badge text=&quot;MySQL 5.6+&quot;/&gt;&quot;">​</a></h4><p>索引下推 (Index Condition Pushdown, aka. ICP) 是 MySQL 5.6 推出的一项对索引查询的优化。在之前版本，当联合索引按照最左前缀匹配后，若还有条件字段不在索引范围或不满足索引使用条件时，则只能按照之前查出的结果依次回表到聚簇索引查询。而索引下推会在索引的遍历过程中就预先对条件中索引已经包含但不满足最左前缀的字段进行预先判断，过滤掉不满足的条件来减少回表次数。</p><p>例如上一小节的例子，在按照 <code>LIKE</code> 条件查询索引树时，会在所有以 J 开头的结果上，利用第二个本不能使用索引的条件来去掉所有不为 3 的项。余下结果再回表聚簇索引查询得到最终结果。</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><div class="edit-info" data-v-e257564d><div class="edit-link" data-v-e257564d><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/ZweiRm/localhost-8080.github.io" target="_blank" rel="noreferrer" data-v-e257564d><!--[--><span class="vpi-square-pen edit-link-icon" data-v-e257564d></span> 请帮助我改善此页面!<!--]--></a></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/mysql/transaction.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>事务</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/mysql/lock.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>锁</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><p class="message" data-v-e315a0ad>本作品由<a rel="contributors" target="_blank" href="https://github.com/ZweiRm/localhost-8080.github.io/graphs/contributors"><img style="display:inline" alt="GitHub contributors" src="https://img.shields.io/github/contributors/ZweiRm/localhost-8080.github.io.svg?label=%E8%B4%A1%E7%8C%AE%E8%80%85&logo=github&logoColor=3EAF7C&style=social"></a>创作，采用<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。<div style="display: flex; justify-content: center; align-items: center;"><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="知识共享许可协议" style="border-width:0" src="/img/licence.png" /></a></div></p><p class="copyright" data-v-e315a0ad>Copyright © 2018-2025 localhost-8080.io</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"about_index.md\":\"CoX9ybzS\",\"algorithm_ds-001.md\":\"C14m5XBU\",\"algorithm_ds-002.md\":\"BvM8Qvc9\",\"algorithm_ds-003.md\":\"BBfrNpmg\",\"algorithm_dynamic-programming.md\":\"CTbpjg75\",\"algorithm_index.md\":\"DRjskFQf\",\"artificial-intelligence_index.md\":\"C8nkoNs4\",\"artificial-intelligence_search-strategies.md\":\"BMooYhLX\",\"c_constant-variable-and-data-type.md\":\"BeU1DXmk\",\"c_index.md\":\"CynNHD2B\",\"deep-learning_index.md\":\"Bg65frW7\",\"deep-learning_logistic-regression-as-a-neural-network.md\":\"ATdJCjiq\",\"deep-learning_python-and-vectorization.md\":\"CZqfqeSZ\",\"framework_activity-launching-process.md\":\"Bbjtot6g\",\"framework_container.md\":\"rq_hER08\",\"framework_index.md\":\"DVVqEh1H\",\"framework_performtraversal.md\":\"CvV1H9tO\",\"hadoop_index.md\":\"BK_KmJge\",\"hello-world_array-and-linked-list.md\":\"BIgP912U\",\"hello-world_binary-search.md\":\"CVEtgeQC\",\"hello-world_building-a-vuepress-powered-blog.md\":\"BOZBWDrp\",\"hello-world_computing-machinery-and-intelligence.md\":\"Cma-37JJ\",\"hello-world_index.md\":\"B6zkg25_\",\"hello-world_setup-a-server-manually.md\":\"bq26ezae\",\"hello-world_the-right-way-doing-research.md\":\"DlN3-q49\",\"hello-world_todo.md\":\"DQ8Ha4In\",\"index.md\":\"BTJx9vDj\",\"java_api-introduction.md\":\"Bx_-Xe87\",\"java_api-io.md\":\"D3f8gGMY\",\"java_api-lang.md\":\"ArFaPXpi\",\"java_api-lang2.md\":\"rpLCjXPv\",\"java_api-util.md\":\"CcGXVKZ8\",\"java_api-util2.md\":\"CAIPy-_H\",\"java_api-util3.md\":\"1Tfts_rl\",\"java_grammars.md\":\"zLed9nyB\",\"java_index.md\":\"CIXjIqYW\",\"java_jvm.md\":\"D9gQYF5c\",\"java_object-oriented.md\":\"Cgd2kYGT\",\"java_references.md\":\"DWqxUTL1\",\"kotlin_index.md\":\"B36UAcis\",\"math_index.md\":\"TMYvKy1-\",\"math_multivariate-function-differential.md\":\"B8pnNYa2\",\"mysql_divide.md\":\"C5Hd8uas\",\"mysql_index.md\":\"Brm_-Nwm\",\"mysql_indices.md\":\"C4Ri8wDz\",\"mysql_lock.md\":\"DVMZUbeu\",\"mysql_question.md\":\"Bfa7mnaW\",\"mysql_references.md\":\"BaxZTZml\",\"mysql_transaction.md\":\"zssWNHH7\",\"python_grammar.md\":\"Bkj9YlUs\",\"python_index.md\":\"DAE2aHEc\",\"quantitative-methods-for-da-ai_index.md\":\"BPYpwYa2\",\"recommender-systems_index.md\":\"Di994w-a\",\"recommender-systems_introduction.md\":\"DP92YrM_\",\"redis_cache.md\":\"9VKeIHCi\",\"redis_cluster.md\":\"Dqn0VxC-\",\"redis_data-structure.md\":\"Y0-w7cWN\",\"redis_index.md\":\"ZKMN8REL\",\"redis_persistence.md\":\"Bjt3Jbc_\",\"software-engineering_index.md\":\"NlNK3OMf\",\"software-engineering_software-process.md\":\"Ca9etcAQ\",\"spring_index.md\":\"CBR-9Wp8\",\"spring_ioc.md\":\"DlxZ7thF\",\"spring_overall.md\":\"neo_UzCl\",\"spring_references.md\":\"Bknd6Dix\",\"web_http.md\":\"DoRJ1OiH\",\"web_index.md\":\"DnPWKeWH\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"zh-CN\",\"dir\":\"ltr\",\"title\":\"本地煮鸡:8080\",\"description\":\"一个博客, 会记录一些技术笔记\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"主页\",\"link\":\"/\"},{\"text\":\"笔记\",\"items\":[{\"text\":\"Java\",\"link\":\"/java/\"},{\"text\":\"杂谈\",\"link\":\"/hello-world/\"}]},{\"text\":\"施工中笔记\",\"items\":[{\"text\":\"编程语言\",\"items\":[{\"text\":\"Kotlin\",\"link\":\"/kotlin/\"},{\"text\":\"Python\",\"link\":\"/python/\"}]},{\"text\":\"后端开发技术\",\"items\":[{\"text\":\"Web\",\"link\":\"/web/\"},{\"text\":\"Spring\",\"link\":\"/spring/\"},{\"text\":\"MySQL\",\"link\":\"/mysql/\"},{\"text\":\"Redis\",\"link\":\"/redis/\"}]},{\"text\":\"学科基础\",\"items\":[{\"text\":\"软件工程\",\"link\":\"/software-engineering/\"},{\"text\":\"算法\",\"link\":\"/algorithm/\"}]},{\"text\":\"机器学习\",\"items\":[{\"text\":\"人工智能\",\"link\":\"/artificial-intelligence/\"},{\"text\":\"深度学习\",\"link\":\"/deep-learning/\"},{\"text\":\"推荐系统\",\"link\":\"/recommender-systems/\"},{\"text\":\"数据分析与人工智能定量分析\",\"link\":\"/quantitative-methods-for-DA-AI/\"}]},{\"text\":\"大数据\",\"items\":[{\"text\":\"Hadoop\",\"link\":\"/hadoop/\"}]},{\"text\":\"Android Frameworks\",\"items\":[{\"text\":\"Framework\",\"link\":\"/framework/\"}]}]},{\"text\":\"码云\",\"link\":\"https://gitee.com/zweirm/\"},{\"text\":\"关于\",\"link\":\"/about/\"}],\"sidebar\":{\"/java/\":[{\"text\":\"Java\",\"link\":\"java/index\",\"items\":[{\"text\":\"语法\",\"link\":\"java/grammars\"},{\"text\":\"面向对象\",\"link\":\"java/object-oriented\"},{\"text\":\"API-介绍\",\"link\":\"java/API-introduction\"},{\"text\":\"API-语言基础类库\",\"link\":\"java/API-lang\"},{\"text\":\"API-语言基础类库2\",\"link\":\"java/API-lang2\"},{\"text\":\"API-工具类库\",\"link\":\"java/API-util\"},{\"text\":\"API-工具类库2\",\"link\":\"java/API-util2\"},{\"text\":\"API-工具类库3\",\"link\":\"java/API-util3\"},{\"text\":\"API-输入输出类库\",\"link\":\"java/API-io\"},{\"text\":\"Java 虚拟机\",\"link\":\"java/jvm\"},{\"text\":\"参考文献嚯资料\",\"link\":\"java/references\"}]}],\"/hello-world/\":[{\"text\":\"Hello World!\",\"link\":\"hello-world/index\",\"items\":[{\"text\":\"Computing Machinery and Intelligence\",\"link\":\"hello-world/computing-machinery-and-intelligence\"},{\"text\":\"学术研究的正确姿势\",\"link\":\"hello-world/the-right-way-doing-research\"},{\"text\":\"搭建一个基于 VuePress 的博客\",\"link\":\"hello-world/building-a-vuepress-powered-blog\"},{\"text\":\"手动配置一台服务器\",\"link\":\"hello-world/setup-a-server-manually\"},{\"text\":\"数组和链表\",\"link\":\"hello-world/array-and-linked-list\"},{\"text\":\"TODO\",\"link\":\"hello-world/TODO\"}]}],\"/kotlin/\":[{\"text\":\"Kotlin\",\"link\":\"kotlin/index\"}],\"/python/\":[{\"text\":\"Python\",\"link\":\"python/index\",\"items\":[{\"text\":\"语法\",\"link\":\"python/grammar\"}]}],\"/c/\":[{\"text\":\"C\",\"link\":\"c/index\",\"items\":[{\"text\":\"常量与数据结构\",\"link\":\"c/constant-variable-and-data-type\"}]}],\"/web/\":[{\"text\":\"Web\",\"link\":\"web/index\",\"items\":[{\"text\":\"HTTP\",\"link\":\"web/HTTP\"}]}],\"/spring/\":[{\"text\":\"Spring\",\"link\":\"spring/index\",\"items\":[{\"text\":\"总览\",\"link\":\"spring/overall\"},{\"text\":\"IoC\",\"link\":\"spring/ioc\"},{\"text\":\"参考文献与资料\",\"link\":\"spring/references\"}]}],\"/redis/\":[{\"text\":\"Redis\",\"link\":\"redis/index\",\"items\":[{\"text\":\"缓存\",\"link\":\"redis/cache\"},{\"text\":\"集群\",\"link\":\"redis/cluster\"},{\"text\":\"数据结构\",\"link\":\"redis/data-structure\"},{\"text\":\"持久化\",\"link\":\"redis/persistence\"}]}],\"/deep-learning/\":[{\"text\":\"Deep Learning\",\"link\":\"deep-learning/index\",\"items\":[{\"text\":\"Logistic Regression as a Neural Network\",\"link\":\"deep-learning/logistic-regression-as-a-neural-network\"},{\"text\":\"Python and Vectorization\",\"link\":\"deep-learning/python-and-vectorization\"}]}],\"/quantitative-methods-for-DA-AI/\":[{\"text\":\"Quantitative Methods for DA and AI\",\"link\":\"quantitative-methods-for-DA-AI/index\"}],\"/artificial-intelligence/\":[{\"text\":\"Artificial Intelligence\",\"link\":\"artificial-intelligence/index\",\"items\":[{\"text\":\"Search Strategies\",\"link\":\"artificial-intelligence/search-strategies\"}]}],\"/software-engineering/\":[{\"text\":\"软件工程\",\"link\":\"software-engineering/index\",\"items\":[{\"text\":\"软件过程\",\"link\":\"software-engineering/software-process\"}]}],\"/math/\":[{\"text\":\"数学\",\"link\":\"math/index\",\"items\":[{\"text\":\"多元函数微分\",\"link\":\"math/multivariate-function-differential\"}]}],\"/algorithm/\":[{\"text\":\"算法\",\"link\":\"algorithm/index\",\"items\":[{\"text\":\"算法 01\",\"link\":\"algorithm/ds-001\"},{\"text\":\"算法 02\",\"link\":\"algorithm/ds-002\"},{\"text\":\"算法 03\",\"link\":\"algorithm/ds-003\"},{\"text\":\"动态规划\",\"link\":\"algorithm/dynamic-programming\"}]}],\"/recommender-systems/\":[{\"text\":\"Recommender Systems\",\"link\":\"recommender-systems/index\",\"items\":[{\"text\":\"Introduction\",\"link\":\"recommender-systems/introduction\"}]}],\"/mysql/\":[{\"text\":\"MySQL\",\"link\":\"mysql/index\",\"items\":[{\"text\":\"事务\",\"link\":\"mysql/transaction\"},{\"text\":\"索引\",\"link\":\"mysql/indices\"},{\"text\":\"锁\",\"link\":\"mysql/lock\"},{\"text\":\"分库分表\",\"link\":\"mysql/divide\"},{\"text\":\"参考文献或资料\",\"link\":\"mysql/references\"}]}],\"/hadoop/\":[{\"text\":\"Hadoop\",\"link\":\"hadoop/index\"}],\"/framework/\":[{\"text\":\"Android Frameworks\",\"link\":\"framework/index\",\"items\":[{\"text\":\"Activity 启动流程\",\"link\":\"framework/activity-launching-process\"},{\"text\":\"performTraversal\",\"link\":\"framework/performTraversal\"},{\"text\":\"Android 12 容器层级\",\"link\":\"framework/container\"}]}]},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"ZweiRm/localhost-8080.github.io\"}],\"footer\":{\"message\":\"本作品由<a rel=\\\"contributors\\\" target=\\\"_blank\\\" href=\\\"https://github.com/ZweiRm/localhost-8080.github.io/graphs/contributors\\\"><img style=\\\"display:inline\\\" alt=\\\"GitHub contributors\\\" src=\\\"https://img.shields.io/github/contributors/ZweiRm/localhost-8080.github.io.svg?label=%E8%B4%A1%E7%8C%AE%E8%80%85&logo=github&logoColor=3EAF7C&style=social\\\"></a>创作，采用<a rel=\\\"license\\\" href=\\\"http://creativecommons.org/licenses/by-nc-sa/4.0/\\\">知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。<div style=\\\"display: flex; justify-content: center; align-items: center;\\\"><a rel=\\\"license\\\" href=\\\"http://creativecommons.org/licenses/by-nc-sa/4.0/\\\"><img alt=\\\"知识共享许可协议\\\" style=\\\"border-width:0\\\" src=\\\"/img/licence.png\\\" /></a></div>\",\"copyright\":\"Copyright © 2018-2025 localhost-8080.io\"},\"editLink\":{\"text\":\"请帮助我改善此页面!\",\"pattern\":\"https://github.com/ZweiRm/localhost-8080.github.io\"},\"search\":{\"provider\":\"local\",\"options\":{\"locales\":{\"zh\":{\"translations\":{\"button\":{\"buttonText\":\"搜索文档\",\"buttonAriaLabel\":\"搜索文档\"},\"modal\":{\"noResultsText\":\"无法找到相关结果\",\"resetButtonTitle\":\"清除查询条件\",\"footer\":{\"selectText\":\"选择\",\"navigateText\":\"切换\"}}}}}}}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>